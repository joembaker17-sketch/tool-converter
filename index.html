<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tool Converter PRO v4.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ========== THEME ========== */
:root{
  --bg:#0b0f1a;
  --card:#121726;
  --border:#1f2538;
  --text:#e8ecf1;
  --muted:#9aa4b2;
  --accent:#6ef2c2;
}
.light{
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:#d6dbea;
  --text:#0b0f1a;
  --muted:#5a6270;
  --accent:#00c897;
}

/* ========== BASE ========== */
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,monospace;
  transition:background .3s,color .3s;
}
.app{max-width:1200px;margin:auto;padding:20px}

/* ========== HEADER ========== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  gap:10px;
}
.badge{
  background:var(--accent);
  color:#042016;
  padding:6px 12px;
  border-radius:999px;
  font-size:13px;
  font-weight:700;
}
.controls{display:flex;gap:10px}

/* ========== BUTTONS ========== */
.icon-btn{
  display:flex;
  align-items:center;
  gap:6px;
  padding:8px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
  transition:transform .2s, background .2s;
}
.icon-btn:hover{transform:scale(1.05)}
.icon-btn svg{
  width:16px;
  height:16px;
  transition:transform .3s;
}
.icon-btn:hover svg{transform:rotate(10deg)}
.primary{
  background:var(--accent);
  color:#042016;
  border:none;
}
button:disabled{opacity:.4;cursor:not-allowed}

/* ========== CARD ========== */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  margin-top:16px;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}

/* ========== TEXTAREA ========== */
textarea{
  width:100%;
  min-height:260px;
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  font-family:monospace;
}

/* ========== FOOTER ========== */
.actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top:14px;
}
.stats{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
}

/* ========== TOAST ========== */
.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%) translateY(20px);
  background:var(--card);
  border:1px solid var(--border);
  padding:10px 16px;
  border-radius:999px;
  opacity:0;
  pointer-events:none;
  transition:.3s;
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}
</style>
</head>

<body>
<div class="app">

<div class="header">
  <h1>Tool Converter</h1>
  <div class="controls">
    <button class="icon-btn" onclick="toggleTheme()">
      <svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 3a9 9 0 1 0 9 9A7 7 0 0 1 12 3z"/>
      </svg>
      Theme
    </button>
    <div class="badge">PRO v4.0</div>
  </div>
</div>

<div class="card">
  <div class="grid">
    <textarea id="input" placeholder="Input HTML here"></textarea>
    <textarea id="output" placeholder="Output" readonly></textarea>
  </div>

  <div class="actions">
    <button class="icon-btn primary" onclick="generate()">
      <svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M5 4v16l14-8z"/>
      </svg>
      Generate
    </button>

    <button class="icon-btn" id="copyBtn" onclick="copyOut()" disabled>
      <svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M16 1H4v14h2V3h10z"/>
        <path fill="currentColor" d="M8 5h12v18H8z"/>
      </svg>
      Copy
    </button>

    <button class="icon-btn" onclick="clearAll()">
      <svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M3 6h18v2H3z"/>
        <path fill="currentColor" d="M8 8h2v10H8z"/>
        <path fill="currentColor" d="M14 8h2v10h-2z"/>
      </svg>
      Clear
    </button>
  </div>

  <div class="stats" id="stats">Generated items: 0</div>
</div>

</div>

<div class="toast" id="toast">âœ… Copied to clipboard</div>

<script>
/* ========== CSS KEYWORDS ========== */
const CSS_KEYWORDS = new Set([
  'margin','margin-top','margin-bottom','margin-left','margin-right',
  'padding','padding-top','padding-bottom','padding-left','padding-right',
  'color','background','background-color','width','height',
  'display','flex','block','inline','none',
  'position','absolute','relative','fixed',
  'top','left','right','bottom',
  'font','font-size','font-weight','line-height',
  'text-align','center',
  'border','border-radius','box-shadow'
]);

/* ========== LOGIC (UNCHANGED) ========== */
function tokenToRule(token){
  const len = token.length;
  let t = '';
  if(/[0-9]/.test(token)) t += 'N';
  if(/[A-Z]/.test(token)) t += 'A';
  if(/[a-z]/.test(token)) t += 'a';
  return `[${len}_${len}_${t}]`;
}

function shouldConvert(token){
  const lower = token.toLowerCase();
  if (CSS_KEYWORDS.has(lower)) return false;
  if (/^[0-9]+(px|em|rem|%)$/.test(lower)) return false;
  if (/^[0-9]+$/.test(lower)) return false;
  return /^[A-Za-z0-9]+$/.test(token);
}

function generate(){
  let html = input.value;
  let count = 0;

  html = html.replace(
    /\b(class|id|data-[\w-]+)="([^"]+)"/g,
    (m, attr, value) => {
      const replaced = value.replace(/\b[A-Za-z0-9-]+\b/g, token => {
        if(shouldConvert(token)){
          count++;
          return tokenToRule(token);
        }
        return token;
      });
      return `${attr}="${replaced}"`;
    }
  );

  html = html.replace(/>([^<]+)</g, (m, txt) => {
    const replaced = txt.replace(/\b[A-Za-z0-9]{3,}\b/g, token => {
      if(shouldConvert(token)){
        count++;
        return tokenToRule(token);
      }
      return token;
    });
    return `>${replaced}<`;
  });

  html = html.replace(/(^|\n)([A-Za-z0-9].*)$/gm, (m, p, txt) => {
    const replaced = txt.replace(/\b[A-Za-z0-9]{3,}\b/g, token => {
      if(shouldConvert(token)){
        count++;
        return tokenToRule(token);
      }
      return token;
    });
    return p + replaced;
  });

  output.value = html;
  stats.textContent = `Generated items: ${count}`;
  copyBtn.disabled = !output.value.trim();
}

function copyOut(){
  navigator.clipboard.writeText(output.value);
  showToast();
}

function clearAll(){
  input.value = '';
  output.value = '';
  stats.textContent = 'Generated items: 0';
  copyBtn.disabled = true;
}

/* ========== UI ONLY ========== */
function toggleTheme(){
  document.body.classList.toggle('light');
}
function showToast(){
  const t = document.getElementById('toast');
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2000);
}
</script>

</body>
</html>
