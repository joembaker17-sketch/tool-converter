<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tool Converter PRO v4.4</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --bg:#0b0f1a;
  --card:#121726;
  --border:#1f2538;
  --text:#e8ecf1;
  --muted:#9aa4b2;
  --accent:#6ef2c2;
}
.light{
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:#d6dbea;
  --text:#0b0f1a;
  --muted:#5a6270;
  --accent:#00c897;
}

*{box-sizing:border-box}
html,body{
  width:100%;
  max-width:100%;
  overflow-x:hidden;
}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,monospace;
  display:flex;
  flex-direction:column;
}
.app{
  max-width:1200px;
  margin:auto;
  padding:20px;
  width:100%;
  flex:1;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.controls{display:flex;gap:10px;flex-wrap:wrap}
.badge{
  background:var(--accent);
  color:#042016;
  padding:6px 12px;
  border-radius:999px;
  font-size:13px;
  font-weight:700;
}

/* BUTTONS */
.icon-btn{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
  transition:.2s;
  white-space:nowrap;
}
.icon-btn:hover{transform:scale(1.05)}
.icon-btn i{font-size:14px}
.primary{
  background:var(--accent);
  color:#042016;
  border:none;
}
button:disabled{opacity:.4;cursor:not-allowed}

/* CARD */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  margin-top:16px;
  overflow:hidden;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

/* TEXTAREA */
textarea{
  width:100%;
  max-width:100%;
  min-height:260px;
  background:transparent;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  font-family:monospace;
  overflow-x:hidden;
  white-space:pre-wrap;
  word-break:break-word;
  overflow-wrap:anywhere;
}

/* ACTIONS */
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}
.stats{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
}

/* HISTORY */
.history{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  margin-top:16px;
}
.history-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.history ul{
  margin:8px 0 0;
  padding-left:18px;
}
.history li{
  cursor:pointer;
  color:var(--accent);
  margin-bottom:6px;
}

/* TOAST */
.toast{
  position:fixed;
  bottom:90px;
  left:50%;
  transform:translateX(-50%) scale(.95);
  background:var(--card);
  border:1px solid var(--border);
  padding:10px 18px;
  border-radius:999px;
  opacity:0;
  pointer-events:none;
  display:flex;
  align-items:center;
  gap:8px;
  transition:.35s ease;
  z-index:999;
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) scale(1);
}
.toast i{color:var(--accent)}

/* FOOTER */
footer{
  border-top:1px solid var(--border);
  padding:16px 10px;
  text-align:center;
  font-size:13px;
  color:var(--muted);
}
.footer-inner{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
  gap:6px;
}
footer a{
  color:var(--accent);
  text-decoration:none;
}
footer a:hover{text-decoration:underline}

/* RESPONSIVE */
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}
@media(max-width:420px){
  .app{padding:12px}
  .header{
    flex-direction:column;
    align-items:flex-start;
  }
  .controls{
    width:100%;
    justify-content:space-between;
  }
  .actions{
    flex-direction:column;
  }
  .icon-btn{
    width:100%;
  }
  textarea{
    min-height:220px;
    font-size:13px;
  }
}
</style>
</head>

<body>
<div class="app">

<div class="header">
  <h1>Tool Converter</h1>
  <div class="controls">
    <button class="icon-btn" id="themeBtn" onclick="toggleTheme()">
      <i class="fa-solid fa-moon"></i> Theme
    </button>
    <div class="badge">PRO v4.4</div>
  </div>
</div>

<div class="card">
  <div class="grid">
    <textarea id="input" placeholder="Input HTML"></textarea>
    <textarea id="output" placeholder="Output" readonly></textarea>
  </div>

  <div class="actions">
    <button class="icon-btn primary" onclick="generate()">
      <i class="fa-solid fa-play"></i> Generate
    </button>
    <button class="icon-btn" id="copyBtn" onclick="copyOut()" disabled>
      <i class="fa-regular fa-copy"></i> Copy
    </button>
    <button class="icon-btn" onclick="clearAll()">
      <i class="fa-solid fa-broom"></i> Clear
    </button>
    <button class="icon-btn" onclick="download('txt')">
      <i class="fa-solid fa-file-lines"></i> TXT
    </button>
    <button class="icon-btn" onclick="download('html')">
      <i class="fa-solid fa-code"></i> HTML
    </button>
  </div>

  <div class="stats" id="stats">Generated items: 0</div>
</div>

<div class="history">
  <div class="history-head">
    <strong>History</strong>
    <button class="icon-btn" onclick="clearHistory()">
      <i class="fa-solid fa-trash"></i> Clear History
    </button>
  </div>
  <ul id="historyList"></ul>
</div>

</div>

<footer>
  <div class="footer-inner">
    <span>Built by <strong>JoemBaker</strong></span>
    <span>.<span>
    <a href="https://joembaker17-sketch.github.io/tool-converter/" target="_blank">GitHub</a>
    <span>.</span>
    <span>Tool Converter <strong>PRO v4.4</strong></span>
  </div>
</footer>

<div class="toast" id="toast">
  <i class="fa-solid fa-check"></i> Copied
</div>

<script>
const CSS_KEYWORDS=new Set([
  'margin','margin-bottom','margin-top','padding','color','background',
  'width','height','display','position','top','left','right','bottom'
]);

function tokenToRule(token){
  const l=token.length;
  let t='';
  if(/[0-9]/.test(token))t+='N';
  if(/[A-Z]/.test(token))t+='A';
  if(/[a-z]/.test(token))t+='a';
  return `[${l}_${l}_${t}]`;
}
function convertToken(t){
  if(t.includes('.')) return t.split('.').map(tokenToRule).join('.');
  return tokenToRule(t);
}
function shouldConvert(t){
  const l=t.toLowerCase();
  if(t.includes('[')||t.includes(']'))return false;
  if(CSS_KEYWORDS.has(l))return false;
  if(/^\d+(px|em|rem|%)$/.test(l))return false;
  return /^[A-Za-z0-9.]$/.test(t) || /^[A-Za-z0-9.]{2,}$/.test(t);
}

let history=JSON.parse(localStorage.getItem('tool_history')||'[]');
function saveHistory(){localStorage.setItem('tool_history',JSON.stringify(history))}
function renderHistory(){
  historyList.innerHTML='';
  history.forEach((h,i)=>{
    const li=document.createElement('li');
    li.textContent=`Result ${i+1}`;
    li.onclick=()=>output.value=h;
    historyList.appendChild(li);
  });
}

function generate(){
  let html=input.value,count=0;
  html=html.replace(
    /(##_*#_*[\{]?)([A-Za-z0-9]+)/g,
    (m,sep,token)=>sep+tokenToRule(token)
  );
  const rep=s=>s.replace(/\b[A-Za-z0-9.]{2,}\b/g,t=>{
    if(shouldConvert(t)){count++;return convertToken(t)}
    return t;
  });
  html=html.replace(/\b(class|id|data-[\w-]+)="([^"]+)"/g,(m,a,v)=>`${a}="${rep(v)}"`);
  html=html.replace(/>([^<]+)</g,(m,t)=>`>${rep(t)}<`);
  html=html.replace(/(^|\n)([^\n<]+)/g,(m,p,t)=>p+convertPlainLine(t));
  output.value=html;
  stats.textContent=`Generated items: ${count}`;
  copyBtn.disabled=!html.trim();
  if(html.trim()){
    history.unshift(html);
    if(history.length>10)history.pop();
    saveHistory();renderHistory();
  }
}

function copyOut(){
  navigator.clipboard.writeText(output.value);
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'),1800);
}
function clearAll(){
  input.value='';
  output.value='';
  stats.textContent='Generated items: 0';
  copyBtn.disabled=true;
}
function clearHistory(){
  history=[];
  saveHistory();
  renderHistory();
}
function download(t){
  const b=new Blob([output.value]);
  const a=document.createElement('a');
  a.href=URL.createObjectURL(b);
  a.download=`result.${t}`;
  a.click();
}
function toggleTheme(){
  document.body.classList.toggle('light');
  document.querySelector('#themeBtn i').className=
    document.body.classList.contains('light')
    ?'fa-solid fa-sun'
    :'fa-solid fa-moon';
}
renderHistory();

function convertPlainLine(line){
  if(/[<>\[\]]/.test(line)) return line;
  return line.replace(/\b([A-Za-z0-9]+)\b/g, t => tokenToRule(t));
}

</script>

</body>
</html>
